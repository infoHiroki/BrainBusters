# BrainBusters ルールブック

## 基本ルール

### ゲームの目的
50階層のダンジョンを踏破し、5体のボスを倒すこと。

### ゲーム開始時のステータス
- HP: 70
- 最大エネルギー: 4
- 手札枚数: 6枚/ターン
- デッキ: 10枚（攻撃5枚、防御4枚、スキル1枚）
- ゴールド: 50

---

## バトルシステム

### ターンの流れ
1. **ドローフェーズ**: 山札から6枚引く
2. **プレイヤーターン**: エネルギーを使ってカードをプレイ
3. **ターン終了**: 「ターン終了」ボタン or カード/エネルギー使い切りで自動終了
4. **敵ターン**: 敵が順番に行動（攻撃/防御/強化/弱体化）
5. 次のターンへ（1に戻る）

### エネルギー
- 毎ターン開始時に最大値（4）まで回復
- カードをプレイするとコスト分消費
- 未使用エネルギーは次のターンに持ち越し**しない**

### ブロック（防御値）
ブロックは**一時的な防御バリア**です。

**仕組み**:
1. 防御カードを使うと「ブロック」を獲得する
2. 敵から攻撃を受けると、まずブロックが減る
3. ブロックが0になってから、HPが減る
4. **ブロックは次のターン開始時に0にリセットされる**

**例**:
- あなたのブロック: 15
- 敵の攻撃: 20ダメージ
- 結果: ブロック15で吸収 → 残り5ダメージがHPに

**重要ポイント**:
- ブロックは**そのターン限り**有効（持ち越し不可）
- 敵の攻撃予告を見て、必要な分だけブロックを積む
- 過剰なブロックは無駄になる（次ターンでリセットされるため）

### ダメージ計算
```
最終ダメージ = (基本ダメージ + 筋力) × 弱体補正 × 脆弱補正 - ブロック
```
1. 基本ダメージを計算
2. 筋力（strength）を加算
3. 弱体（weak）がある場合、**75%に減少**
4. 脆弱（vulnerable）がある場合、**150%に増加**
5. ブロックで軽減

---

## ステータス効果（重要！）

### バフ（味方に有利な効果）

| アイコン | 名前 | 効果 | 例 |
|---------|------|------|-----|
| 💪 | **筋力** | 攻撃ダメージに+（スタック数）加算 | 筋力3 → 全攻撃+3ダメージ |
| 🏃 | **敏捷** | ブロック値に+（スタック数）加算 | 敏捷2 → 全ブロック+2 |
| ✨ | **再生** | ターン終了時にHP回復 | 再生3 → 毎ターン3HP回復 |

### デバフ（敵に有利な効果）

| アイコン | 名前 | 効果 | 計算例 |
|---------|------|------|--------|
| 💔 | **脆弱** | 受けるダメージが**1.5倍** | 10ダメージ → 15ダメージ |
| 😵 | **弱体** | 与えるダメージが**0.75倍** | 10ダメージ → 7ダメージ |
| 🔻 | **衰弱** | 得るブロックが**0.75倍** | 10ブロック → 7ブロック |
| ☠️ | **毒** | ターン終了時にダメージ | 毒3 → 毎ターン3ダメージ |

### ステータスの持続
- スタック数は効果の強さ
- 持続ターン数があるものは、ターン終了時に1減少
- 0になると効果消滅

**例**: 「脆弱2（2ターン）」
- 2ターンの間、受けるダメージ1.5倍
- 2ターン後に効果消滅

---

## カードタイプ

### 攻撃カード（赤）🗡️
敵にダメージを与える。

| バリエーション | 効果 |
|--------------|------|
| 単体高威力 | 1体に大ダメージ |
| 全体攻撃 | 全ての敵にダメージ（威力低め） |
| 脆弱付与 | ダメージ + 敵に脆弱 |
| 弱体付与 | ダメージ + 敵に弱体 |
| 筋力獲得 | ダメージ + 自分に筋力バフ |

### 防御カード（青）🛡️
ブロックを得る。

| バリエーション | 効果 |
|--------------|------|
| 高ブロック | 大量のブロック |
| 敏捷付与 | ブロック + 敏捷バフ |
| ドロー付き | ブロック + カードを引く |
| 反撃 | ブロック + 少量ダメージ |
| 弱体付与 | ブロック + 敵に弱体 |

### スキルカード（緑）✨
多様な効果。

| バリエーション | 効果 |
|--------------|------|
| ドロー | カードを複数枚引く |
| エネルギー | エネルギーを獲得 |
| 筋力バフ | 筋力を大量獲得 |
| 全体デバフ | 全敵に脆弱+弱体 |
| 複合 | ダメージ+ブロック+ドロー |

### 回復カード（緑）💚
HPを回復。

| コスト | 回復量 | 追加効果 |
|-------|--------|---------|
| 1 | 8 HP | なし or ブロック |
| 2 | 18 HP | なし or ブロック or 再生 |
| 3 | 30 HP | 再生バフ付き |

---

## コストと効果値の目安

| コスト | ダメージ/ブロック |
|--------|-----------------|
| 0 | 5〜10 |
| 1 | 12〜18 |
| 2 | 20〜28 |
| 3 | 30〜45 |

---

## ダンジョン構造（50階）

### ボス階
| 階 | ボス名 | 備考 |
|----|--------|------|
| **10** | 虚無 | 撃破時HP30%回復 |
| **20** | 永劫回帰 | 撃破時HP30%回復 |
| **30** | 絶対精神 | 撃破時HP30%回復 |
| **40** | 存在と時間 | 撃破時HP30%回復 |
| **50** | 世界精神 | 最終ボス |

### 敵の数
| 階層 | 敵の数 |
|------|--------|
| 1-19階 | 1〜2体 |
| 20-39階 | 1〜3体（2体が多い） |
| 40階以降 | 2〜3体（3体が多い） |
| エリート | 1〜2体 |
| ボス | 1体（強力） |

### 報酬
- 通常勝利: ゴールド10-20 + カード1枚選択（任意）
- エリート勝利: ゴールド25-35 + カード1枚
- ボス勝利: ゴールド40-50 + カード1枚 + **レリック**

---

## ストックカード（重要システム）

### ストックカードとは？
報酬で獲得したカードを**1枚だけストック**しておける特別なスロットです。

### 使い方
1. **設定**: 報酬画面でカードを選択後、「📦 ストックに設定」を選ぶ
2. **使用**: バトル中、いつでも「📦 ストック」ボタンで使用可能
3. **制限**: ストックは1枚まで。新しいカードを設定すると上書き

### 活用例
- **回復カード**をストック → HPが減った時に即使用
- **強力な攻撃カード**をストック → ボス戦で切り札として使用
- **バフカード**をストック → 戦闘開始直後に発動

### 注意点
- ストックカードは**デッキには入らない**（手札として引かれない）
- 使用すると消滅（1回限り）
- 戦闘ごとにリセット**されない**（次の戦闘でも使える）

---

## 敵の行動

敵ターンでは、各敵が順番に以下のいずれかの行動を取ります：

| 行動 | 効果 |
|------|------|
| **攻撃** | プレイヤーにダメージ（ブロックで軽減可能） |
| **防御** | 敵自身がブロックを得る |
| **自己強化** | 筋力アップ（以降の攻撃が強くなる） |
| **弱体化** | プレイヤーに弱体デバフを付与 |

**ポイント**: 敵の行動は予告されないため、常に防御を意識しつつ攻めましょう。

---

## 勝敗条件

### 勝利条件
- バトル: 全ての敵のHPを0にする
- ゲームクリア: 50階のボス「世界精神」を倒す

### 敗北条件
- プレイヤーのHPが0になる

---

## ボス一覧

| 階 | 名前 | HP | 特徴 |
|----|------|-----|------|
| 10 | 虚無 | 150 | バランス型 |
| 20 | 永劫回帰 | 180 | 連続攻撃あり |
| 30 | 絶対精神 | 225 | 高火力 |
| 40 | 存在と時間 | 280 | 高耐久 |
| 50 | 世界精神 | 350 | 最強、大技あり |

---

## ゲームのコツ

1. **攻撃と防御のバランスを意識する**
   - 敵の攻撃に備えて毎ターンある程度の防御を確保
   - 複数の敵がいる場合は集中攻撃で各個撃破

2. **全体攻撃は複数の敵に有効**
   - 敵が3体の時、全体攻撃は実質3倍の価値
   - 威力は単体攻撃より低いがトータルダメージは高い

3. **デバフを活用**
   - 脆弱付与 → 次の攻撃が1.5倍に
   - 弱体付与 → 敵の攻撃力を下げる

4. **回復は計画的に**
   - ボス撃破時: 最大HPの30%回復
   - 回復カード: 戦闘中に使用
   - ストックカードに回復カードを保持しておくと便利

5. **エネルギーは使い切る**
   - 余ったエネルギーは次ターンに持ち越せない
   - 手札やエネルギーがなくなると自動でターン終了
