# 現在のタスク

## 引き継ぎ情報

### プロジェクト概要
- **BrainBusters**: Slay the Spire風のローグライクカードゲーム（React Native/Expo）
- 500の哲学概念カードを使ったターン制バトル
- 50階ダンジョン、5体のボス

### 現在の状態
- バトルシステムは動作中
- 敵の攻撃は一体ずつ順次処理、メッセージはスタック表示
- 敵の行動予告（Intent）は削除済み
- 13カテゴリ別のカード効果テンプレート実装済み

### 核心的な問題（最優先で解決すべき）
**「ゲーム」になっていない** - カードを全部使えるので選択がなく、連打ゲームになっている
- エネルギーコスト0-3の幅が狭すぎる
- 手札6枚を全部使い切れてしまう
- → Phase 1のバランス調整で「手札6枚中3-4枚しか使えない」状態を目指す

### 重要ファイル
- `src/screens/BattleScreen.tsx` - バトル画面のメインロジック
- `src/data/cards.ts` - カード生成・効果テンプレート
- `src/types/game.ts` - ゲーム設定（GAME_CONFIG）
- `src/store/runStore.ts` - ゲーム状態管理
- `docs/RULEBOOK.md` - ルールブック

---

## 完了済み
- [x] 50階に拡張、26-50階用の新敵・エリート追加
- [x] 敵の行動予告（Intent）削除
- [x] 敵の順次処理・メッセージスタック表示
- [x] 13カテゴリ別カード効果テンプレート
- [x] 敵のバフ/デバフ処理実装
- [x] バランス調整（エネルギー4、HP70）

---

## 即時対応（優先度: 最高）
- [ ] ボス撃破時の回復を100%に変更（現在30%）
- [ ] ボスを10体に増加（10階ごと）

---

## Phase 1: エネルギー・カードバランス（優先度: 高）
**問題**: カードを全部使い切れる → 選択がない → 連打ゲーム

- [ ] コスト幅拡大（0-3 → 0-6）
- [ ] 最大エネルギー増加（4 → 7程度）
- [ ] 0コストカード削減（5%以下に）
- [ ] 高コスト・高威力カード追加

**目標**: 手札6枚中3-4枚しか使えない → 毎ターン選択が必要

---

## Phase 2: 難易度調整（優先度: 高）
- [ ] 敵のダメージ2倍
- [ ] 敵のHP1.5倍
- [ ] 「防御しないと死ぬ」緊張感の確認

---

## Phase 3: 概念タグシステム（優先度: 中）
- [ ] タグ定義（実存主義、合理主義、感情など）
- [ ] 500概念へのタグ付与
- [ ] コンボ判定ロジック（同タグ連続で効果UP）

---

## Phase 4: リスク/リターン（優先度: 中）
- [ ] HPコストカード（HP消費で強力効果）
- [ ] 条件付きカード（HP50%以下で発動など）
- [ ] ギャンブルカード（ランダム効果）

---

## その他
- [ ] ショップ機能充実
- [ ] 図鑑機能
- [ ] レリック効果の確認・修正

---

## メモ

### 核心的な問題
> 現状は「カードを出す作業」であり「ゲーム」ではない

### バランス調整の指針
- 最大エネルギー: 7程度
- コスト分布: 0(5%), 1-2(40%), 3-4(40%), 5-6(15%)
- 結果: 「攻撃か防御か」の判断が毎ターン必要
